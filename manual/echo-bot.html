
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>オウム返しBotを作ろう · 【ハンズオン資料】写真を送るとAIが分析してくれるLINE Botを1時間で作ってみよう ~プロトアウト授業体験会~</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 3.6.17">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-page-treeview/style.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="face-api.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    TOP
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2" data-path="echo-bot.html">
            
                <a href="echo-bot.html">
            
                    
                    オウム返しBotを作ろう
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="face-api.html">
            
                <a href="face-api.html">
            
                    
                    感情分析AIと組み合わせよう
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >オウム返しBotを作ろう</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div class="treeview__container"><ul>
<li><div><a href="#オウム返しbotを作ろう">オウム返しBotを作ろう</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#この章のゴール">この章のゴール</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#完成イメージ">完成イメージ</a><i></i></div></li>
</ul></li>
<li><div><a href="#ここからは話を聞くタイム">ここからは話を聞くタイム</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#line-botとは？">LINE Botとは？</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#apiとは？">APIとは？</a><i></i></div></li>
<li><div><a href="#有名なline-bot">有名なLINE Bot</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#プッシュプルコントロール型">プッシュ/プル/コントロール型</a><i></i></div></li>
<li><div><a href="#広告プッシュ型">広告プッシュ型</a><i></i></div></li>
</ul></li>
<li><div><a href="#なぜline-botか">なぜLINE Botか</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#一般的なメリット">一般的なメリット</a><i></i></div></li>
<li><div><a href="#プロトタイピング観点でのメリット">プロトタイピング観点でのメリット</a><i></i></div></li>
</ul></li>
</ul></li>
<li><div><a href="#システム概要図">システム概要図</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#オウム返しbotのシステム概要図">オウム返しBotのシステム概要図</a><i></i></div></li>
<li><div><a href="#感情分析ailine-botのシステム概要図">感情分析AI+LINE Botのシステム概要図</a><i></i></div></li>
</ul></li>
</ul></li>
<li><div><a href="#ここからは手を動かすタイム">ここからは手を動かすタイム</a><i class="level__parent level__item level__parent--opened" state="opened" onclick="var curState = this.getAttribute(&apos;state&apos;);var nextState = curState === &apos;opened&apos; ? &apos;hidden&apos; : &apos;opened&apos;;this.setAttribute(&apos;state&apos;, nextState);this.className = this.className.split(curState).join(nextState);var list = this.parentNode.nextElementSibling;if (nextState === &apos;hidden&apos;) {    list.style.display = &apos;none&apos;;} else {    list.style.display = &apos;block&apos;;}"></i></div>
<ul>
<li><div><a href="#line-botを登録しよう">LINE Botを登録しよう</a><i></i></div></li>
<li><div><a href="#gitpodを開こう">Gitpodを開こう</a><i></i></div></li>
<li><div><a href="#オウム返しbotを動かしてみよう">オウム返しBotを動かしてみよう</a><i></i></div></li>
<li><div><a href="#課題オウム2倍返しbotを作ってみよう">(課題)オウム2倍返しBOTを作ってみよう</a><i></i></div></li>
<li><div><a href="#課題オウム返しbotにキャラ付けしよう">(課題)オウム返しBotにキャラ付けしよう</a><i></i></div></li>
<li><div><a href="#任意自動応答メッセージをオフにする">(任意)自動応答メッセージをオフにする</a><i></i></div></li>
</ul></li>
<li><div><a href="#まとめ">まとめ</a><i></i></div></li>
</ul></li>
</ul>
</div>

<h1 id="オウム返しbotを作ろう">オウム返しBotを作ろう</h1>
<h2 id="この章のゴール">この章のゴール</h2>
<ul>
<li>送信した文字をそのまま返す<code>オウム返しBot</code>を作成する</li>
</ul>
<h3 id="完成イメージ">完成イメージ</h3>
<iframe width="414" height="736" src="https://www.youtube.com/embed/BIkEuLy2tAs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h2 id="ここからは話を聞くタイム">ここからは話を聞くタイム</h2>
<p><a href="https://gyazo.com/6529781dd996c64228080c383aa4a325" target="_blank"><img src="https://i.gyazo.com/6529781dd996c64228080c383aa4a325.png" alt="Image from Gyazo" width="500"></a></p>
<h3 id="line-botとは？">LINE Botとは？</h3>
<p>そもそもBotとは、ロボット(Robot)が語源の言葉で、インターネット上で反復タスクを実行するプログラムのことです。  </p>
<blockquote>
<p>ボットとは？：<a href="https://www.cloudflare.com/ja-jp/learning/bots/what-is-a-bot/" target="_blank">https://www.cloudflare.com/ja-jp/learning/bots/what-is-a-bot/</a></p>
</blockquote>
<p>最近では、チャットボットやツイートボット、SEOの分野ではGooglebotなど、様々な<code>Bot</code>があります。</p>
<p>LINE Botとは、LINEアプリ上で自動で返信してくれるプログラムのことです。<br>LINEアプリとプログラムの連携には、LINEが提供している<code>Messaging API</code>を利用します。</p>
<h4 id="apiとは？">APIとは？</h4>
<p>APIとは、<code>Application Programming Interface</code>の略で、つまりインターフェースです。<br>APIの中でも、Web APIが提供されているサービスでは、複雑なプログラミングを行うことなく、HTTP経由でサービスを利用できるため、自身が開発しているプロダクトに簡単に組み込むことができます。</p>
<p>なにかのサービスを利用する際に、どんなサービスでもある程度の統一感のある利用方法が用意されている、というイメージで良いと思います。</p>
<p>現在、色々なサービスがAPIを提供しています。<br>例えば、</p>
<ul>
<li>Yahoo!天気 (<a href="https://developer.yahoo.co.jp/webapi/map/openlocalplatform/v1/weather.html" target="_blank">https://developer.yahoo.co.jp/webapi/map/openlocalplatform/v1/weather.html</a>)</li>
<li>YouTube (<a href="https://developers.google.cn/youtube/iframe_api_reference?hl=ja" target="_blank">https://developers.google.cn/youtube/iframe_api_reference?hl=ja</a>)</li>
<li>Twitter (<a href="https://developer.twitter.com/ja/docs" target="_blank">https://developer.twitter.com/ja/docs</a>)</li>
<li>Facebook (<a href="https://developers.facebook.com/docs/apis-and-sdks?locale=ja_JP" target="_blank">https://developers.facebook.com/docs/apis-and-sdks?locale=ja_JP</a>)</li>
</ul>
<p>などなど。</p>
<blockquote>
<p>すぐに使えるAPIまとめ：<a href="https://protoout.studio/posts/public-apis-api-get" target="_blank">https://protoout.studio/posts/public-apis-api-get</a></p>
</blockquote>
<p>では、無料で利用できるAPIが100個以上紹介されています。</p>
<h4 id="有名なline-bot">有名なLINE Bot</h4>
<h5 id="プッシュプルコントロール型">プッシュ/プル/コントロール型</h5>
<ul>
<li>JR東日本 Chat Bot（<a href="https://info.jreast-chat.com/" target="_blank">https://info.jreast-chat.com/</a>）</li>
<li>ヤマト運輸（<a href="https://www.kuronekoyamato.co.jp/ytc/campaign/renkei/LINE/" target="_blank">https://www.kuronekoyamato.co.jp/ytc/campaign/renkei/LINE/</a>）</li>
</ul>
<h5 id="広告プッシュ型">広告プッシュ型</h5>
<ul>
<li>ユニクロ・GU（<a href="http://official-blog.line.me/ja/archives/28533966.html" target="_blank">http://official-blog.line.me/ja/archives/28533966.html</a>）</li>
<li>楽天（<a href="http://official-blog.line.me/ja/archives/24736939.html" target="_blank">http://official-blog.line.me/ja/archives/24736939.html</a>）</li>
</ul>
<p>また最近、LINE Botのユースケースが発表されました。LINE Botを作る際に参考にしてみると良いと思います。</p>
<blockquote>
<p>LINE API UseCase - ビジネスの悩みをLINEを使って解決：<a href="https://lineapiusecase.com/ja/top.html" target="_blank">https://lineapiusecase.com/ja/top.html</a></p>
</blockquote>
<h4 id="なぜline-botか">なぜLINE Botか</h4>
<h5 id="一般的なメリット">一般的なメリット</h5>
<ul>
<li>ユーザーに利用してもらうときにアプリのインストールが不要。（友達登録だけでOK！簡単！）</li>
<li>ユーザーへのプッシュ通知を簡単に送ることができる。（量が多いとお金がかかる）</li>
</ul>
<h5 id="プロトタイピング観点でのメリット">プロトタイピング観点でのメリット</h5>
<ul>
<li>LINEのチャット画面を利用するのでUIを最初から考える必要がなく、プロトタイプの価値の創造に注力できる。<ul>
<li>必要に応じて、凝ったUIも実現できる。（<a href="https://developers.line.biz/ja/docs/messaging-api/using-flex-messages/" target="_blank">FlexMessage</a>や<a href="https://developers.line.biz/ja/docs/liff/overview/" target="_blank">LIFF</a>を利用）</li>
</ul>
</li>
<li>Node.jsのSDKが公式に用意されており、UIからサーバーまでをJavaScriptで書くことで、最小限の学習で作ることができる。</li>
</ul>
<h3 id="システム概要図">システム概要図</h3>
<p>本ハンズオンでの登場人物は以下の3つです。<br>主に、サーバーの部分のプログラムを編集していきます。</p>
<p><a href="https://gyazo.com/1ceade2f10b784b68f3bed71efcf83e3" target="_blank"><img src="https://i.gyazo.com/1ceade2f10b784b68f3bed71efcf83e3.png" alt="Image from Gyazo" width="933"></a></p>
<h4 id="オウム返しbotのシステム概要図">オウム返しBotのシステム概要図</h4>
<p><code>1. オウム返しBotを作ろう</code>では、LINEアプリから送信した文字列をサーバーで受け取り、LINEアプリにそのまま返すオウム返しBotを作成します。</p>
<p><a href="https://gyazo.com/ef380d63c53fba3e41b79216fb7f0070" target="_blank"><img src="https://i.gyazo.com/ef380d63c53fba3e41b79216fb7f0070.png" alt="Image from Gyazo" width="822"></a></p>
<h4 id="感情分析ailine-botのシステム概要図">感情分析AI+LINE Botのシステム概要図</h4>
<p><code>2. 感情分析AIと組み合わせよう</code>では、LINEアプリから送信した画像を、Azure Face APIに送信し感情分析します。<br>その結果をサーバーで変換して、LINEアプリに結果を表示します。</p>
<p><a href="https://gyazo.com/221d9176e00f46fb5923f0c4944e6274" target="_blank"><img src="https://i.gyazo.com/221d9176e00f46fb5923f0c4944e6274.png" alt="Image from Gyazo" width="987"></a></p>
<h2 id="ここからは手を動かすタイム">ここからは手を動かすタイム</h2>
<p><a href="https://gyazo.com/3600fb35b96dcd212cc0d4b6f3240e74" target="_blank"><img src="https://i.gyazo.com/3600fb35b96dcd212cc0d4b6f3240e74.png" alt="Image from Gyazo" width="500"></a></p>
<h3 id="line-botを登録しよう">LINE Botを登録しよう</h3>
<p>LINE Botは、LINE Developersから登録する必要があります。</p>
<p>LINE Developers(<a href="https://developers.line.biz/ja/" target="_blank">https://developers.line.biz/ja/</a>)を開き、ログインします。</p>
<p><a href="https://gyazo.com/55926be4e43791a4d30a2c4fa35b77c1" target="_blank"><img src="https://i.gyazo.com/55926be4e43791a4d30a2c4fa35b77c1.png" alt="Image from Gyazo" width="912"></a></p>
<p><a href="https://gyazo.com/6921026259dc0cacb200097e82340289" target="_blank"><img src="https://i.gyazo.com/6921026259dc0cacb200097e82340289.png" alt="Image from Gyazo" width="912"></a></p>
<p>ログインできたら、プロバイダーの<code>作成</code>をクリックします。</p>
<p><a href="https://gyazo.com/ef306d3ca442a7a8df95cce418778b57" target="_blank"><img src="https://i.gyazo.com/ef306d3ca442a7a8df95cce418778b57.png" alt="Image from Gyazo" width="1249"></a></p>
<p>プロバイダー名を入力し、<code>作成</code>をクリックします。（名前は好きなものでOKです。）</p>
<p><a href="https://gyazo.com/718446885e86eb2f547379fb63fbbd59" target="_blank"><img src="https://i.gyazo.com/718446885e86eb2f547379fb63fbbd59.png" alt="Image from Gyazo" width="1249"></a></p>
<p>Messaging APIを作成します。</p>
<p><a href="https://gyazo.com/ca20e71a634a089a5ce80aeda3dd065a" target="_blank"><img src="https://i.gyazo.com/ca20e71a634a089a5ce80aeda3dd065a.png" alt="Image from Gyazo" width="1249"></a></p>
<p>必要な項目を入力し、<code>作成</code>をクリックします。</p>
<table>
<thead>
<tr>
<th>項目</th>
<th>内容</th>
<th>備考</th>
</tr>
</thead>
<tbody>
<tr>
<td>プロバイダー</td>
<td>先程作成したものを選択</td>
<td>--</td>
</tr>
<tr>
<td>チャネル名</td>
<td>好きな名前</td>
<td>Bot名になります。<code>LINE</code>という文字は入れられないので注意。</td>
</tr>
<tr>
<td>チャネル説明</td>
<td>チャネルの説明</td>
<td>--</td>
</tr>
<tr>
<td>大業種</td>
<td>適当に選択</td>
<td>--</td>
</tr>
<tr>
<td>小業種</td>
<td>適当に選択</td>
<td>--</td>
</tr>
</tbody>
</table>
<p><a href="https://gyazo.com/6a8e7227b84a5433e3d1f5a5c673c5ed" target="_blank"><img src="https://i.gyazo.com/6a8e7227b84a5433e3d1f5a5c673c5ed.png" alt="Image from Gyazo" width="1249"></a></p>
<p><a href="https://gyazo.com/378b1d61ba94943527c9af268b1ec0d6" target="_blank"><img src="https://i.gyazo.com/378b1d61ba94943527c9af268b1ec0d6.png" alt="Image from Gyazo" width="1249"></a></p>
<p><a href="https://gyazo.com/7b46e4c918db445c98c876a175c975d4" target="_blank"><img src="https://i.gyazo.com/7b46e4c918db445c98c876a175c975d4.png" alt="Image from Gyazo" width="1249"></a></p>
<p><a href="https://gyazo.com/ce7837928b7b873d9ec2d48e4a5fa9cc" target="_blank"><img src="https://i.gyazo.com/ce7837928b7b873d9ec2d48e4a5fa9cc.png" alt="Image from Gyazo" width="1249"></a></p>
<p>こんな画面が表示されれば登録完了です。</p>
<p><a href="https://gyazo.com/331c4e70599ed34ffb735ea0c9b5a772" target="_blank"><img src="https://i.gyazo.com/331c4e70599ed34ffb735ea0c9b5a772.png" alt="Image from Gyazo" width="1134"></a></p>
<p>QRコードをLINEアプリで読み取り、友達登録しましょう。</p>
<p><a href="https://gyazo.com/a59294c0b4135a4bfb2a3f40fc5d6f9b" target="_blank"><img src="https://i.gyazo.com/a59294c0b4135a4bfb2a3f40fc5d6f9b.png" alt="Image from Gyazo" width="1134"></a></p>
<p><a href="https://gyazo.com/1e6049acab5fcc1a83f73000949701f6" target="_blank"><img src="https://i.gyazo.com/1e6049acab5fcc1a83f73000949701f6.png" alt="Image from Gyazo" width="400"></a></p>
<p>ここまでできたらチャット欄に<code>b</code>を送ってください！</p>
<p><a href="https://gyazo.com/403c3db5dbed68f05091774a13d08307" target="_blank"><img src="https://i.gyazo.com/403c3db5dbed68f05091774a13d08307.png" alt="Image from Gyazo" width="256"></a></p>
<p>うまくいかない方はサポートするので、チャット欄で教えて下さい。</p>
<h3 id="gitpodを開こう">Gitpodを開こう</h3>
<p>Gitpodは、オンライン利用できるエディタです。</p>
<p>以下のURLを開きましょう。<br><a href="https://gitpod.io/#https://github.com/tmitsuoka0423/line-bot-azure-face-api-handson" target="_blank">https://gitpod.io/#https://github.com/tmitsuoka0423/line-bot-azure-face-api-handson</a></p>
<p>GitHubアカウントでログインします。</p>
<p><a href="https://gyazo.com/14aca92f43ed9cfa88f3484178124d0d" target="_blank"><img src="https://i.gyazo.com/14aca92f43ed9cfa88f3484178124d0d.png" alt="Image from Gyazo" width="1000"></a></p>
<p><a href="https://gyazo.com/21ef753c6e49040badfcc0442fcc1298" target="_blank"><img src="https://i.gyazo.com/21ef753c6e49040badfcc0442fcc1298.png" alt="Image from Gyazo" width="1000"></a></p>
<p>このような画面が表示されます。</p>
<p><a href="https://gyazo.com/d8ef262a41e320c525d51762be79a8b6" target="_blank"><img src="https://i.gyazo.com/d8ef262a41e320c525d51762be79a8b6.png" alt="Image from Gyazo" width="1000"></a></p>
<p>Gitpodの準備はこれでOKです。<br>オウム返しBotを動かす準備を進めていきましょう！</p>
<h3 id="オウム返しbotを動かしてみよう">オウム返しBotを動かしてみよう</h3>
<p>Gitpod上でコードを編集しましょう。<br>LINE Botの設定を追記する必要があるので編集していきます。</p>
<p>サイドバーから<code>index.js</code>を開き、<code>チャネルシークレット</code>・<code>チャネルアクセストークン</code>の設定箇所までスクロールします。</p>
<p><a href="https://gyazo.com/54036709b6af66f45ac166a2862b4345" target="_blank"><img src="https://i.gyazo.com/54036709b6af66f45ac166a2862b4345.png" alt="Image from Gyazo" width="1000"></a></p>
<p><code>チャネルシークレット</code>・<code>チャネルアクセストークン</code>は<a href="https://developers.line.biz/ja/" target="_blank">LINE Developers</a>のサイトから取得することができます。</p>
<p>先程作成したチャネルを開き、<code>Basic settings</code>タブ・<code>Messaging API</code>タブからそれぞれ、<code>チャネルシークレット</code>・<code>チャネルアクセストークン</code>をコピーしてきます。</p>
<p><a href="https://gyazo.com/f1660c511e41f7ec87132b5d30e70f8e" target="_blank"><img src="https://i.gyazo.com/f1660c511e41f7ec87132b5d30e70f8e.png" alt="Image from Gyazo" width="1000"></a></p>
<p><a href="https://gyazo.com/16624ba230246f77b31fccb6ae650061" target="_blank"><img src="https://i.gyazo.com/16624ba230246f77b31fccb6ae650061.png" alt="Image from Gyazo" width="1000"></a></p>
<p>入力するとこのようになります。<br>(シークレットキーとアクセストークンの値は人によって異なります)</p>
<blockquote>
<p><code>注意！</code><br>シークレットキーとアクセストークンは公開しないようにしましょう。<br>Botを悪用されるリスクがあります。</p>
</blockquote>
<p><a href="https://gyazo.com/1ad95b14a073bb15cb2e3b687cf9bb8a" target="_blank"><img src="https://i.gyazo.com/1ad95b14a073bb15cb2e3b687cf9bb8a.png" alt="Image from Gyazo" width="1122.68"></a></p>
<p>ターミナルに<code>node index.js</code>と入力して、<code>Enter</code>を押します。</p>
<p><a href="https://gyazo.com/0cd665b2856038452f724002cad15e24" target="_blank"><img src="https://i.gyazo.com/0cd665b2856038452f724002cad15e24.png" alt="Image from Gyazo" width="1000"></a></p>
<p><code>Make Public</code>をクリックします。</p>
<p><a href="https://gyazo.com/c4ef4785b2d3f857aa1bce0fe523b640" target="_blank"><img src="https://i.gyazo.com/c4ef4785b2d3f857aa1bce0fe523b640.png" alt="Image from Gyazo" width="1000"></a></p>
<p><code>Open Ports</code>タブの<code>Open Browwer</code>をクリックします。</p>
<p><a href="https://gyazo.com/4fc6b6d4917879ba10e28f129e7d2cd4" target="_blank"><img src="https://i.gyazo.com/4fc6b6d4917879ba10e28f129e7d2cd4.png" alt="Image from Gyazo" width="1000"></a></p>
<p>新しいタブが開くので、そのページのURLをコピーし、Botチャネルの<code>Webhook URL</code>にペーストします。</p>
<p><a href="https://gyazo.com/afa573e55291365780c8ee43b88682b6" target="_blank"><img src="https://i.gyazo.com/afa573e55291365780c8ee43b88682b6.png" alt="Image from Gyazo" width="1000"></a></p>
<p>接続確認をします。<br><code>Verify</code>をクリックして、<code>Success</code>と表示されればOKです。</p>
<p><a href="https://gyazo.com/a8a87743e1d9b02fdd7b1936070d13c0" target="_blank"><img src="https://i.gyazo.com/a8a87743e1d9b02fdd7b1936070d13c0.png" alt="Image from Gyazo" width="974"></a></p>
<p><a href="https://gyazo.com/084611d55d08bb89b44ba163097932bf" target="_blank"><img src="https://i.gyazo.com/084611d55d08bb89b44ba163097932bf.png" alt="Image from Gyazo" width="974"></a></p>
<p>実際にLINEで動作確認してみましょう。<br>Botページに表示されているQRコードを読み取り、Botと友達になってから、適当に文字を送ってみましょう。</p>
<iframe width="414" height="736" src="https://www.youtube.com/embed/BIkEuLy2tAs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>オウム返しBotの作成は以上で完了です！  </p>
<p>ここまでできたらチャット欄に<code>b</code>を送ってください！</p>
<p><a href="https://gyazo.com/403c3db5dbed68f05091774a13d08307" target="_blank"><img src="https://i.gyazo.com/403c3db5dbed68f05091774a13d08307.png" alt="Image from Gyazo" width="256"></a></p>
<p>うまくいかない方はサポートするので、チャット欄で声をかけてください。</p>
<h3 id="課題オウム2倍返しbotを作ってみよう">(課題)オウム2倍返しBOTを作ってみよう</h3>
<p>完成イメージ</p>
<p><a href="https://gyazo.com/472f5b31bf7d3ab224ffdece712b05b1" target="_blank"><img src="https://i.gyazo.com/472f5b31bf7d3ab224ffdece712b05b1.png" alt="Image from Gyazo" width="437"></a></p>
<h3 id="課題オウム返しbotにキャラ付けしよう">(課題)オウム返しBotにキャラ付けしよう</h3>
<p>NARUTO風</p>
<p><a href="https://gyazo.com/ed3c6c6db6dc37f429d698aa1c6b41de" target="_blank"><img src="https://i.gyazo.com/ed3c6c6db6dc37f429d698aa1c6b41de.png" alt="Image from Gyazo" width="441"></a></p>
<h3 id="任意自動応答メッセージをオフにする">(任意)自動応答メッセージをオフにする</h3>
<p>LINE Botはデフォルトでは、<code>あいさつメッセージ</code>と<code>応答メッセージ</code>がオンになっています。<br>この設定を変更しましょう。</p>
<p>Messaging API設定タブ &gt; 応答メッセージ &gt; <code>編集</code>をクリックし、LINE公式アカウント設定画面を開きます。</p>
<p><a href="https://gyazo.com/b9ba1653be88c67ff0661251c545ba8f" target="_blank"><img src="https://i.gyazo.com/b9ba1653be88c67ff0661251c545ba8f.png" alt="Image from Gyazo" width="1076"></a></p>
<p>不要なメッセージをオフにします。</p>
<p><a href="https://gyazo.com/bd8567c7e1c492642e61e31fef9390b2" target="_blank"><img src="https://i.gyazo.com/bd8567c7e1c492642e61e31fef9390b2.png" alt="Image from Gyazo" width="1076"></a></p>
<p>これでオウム返しだけが返ってくるようになりました。</p>
<h2 id="まとめ">まとめ</h2>
<ul>
<li>LINE DevelopersからLINE Botのチャンネルを作成し、友達登録しました。</li>
<li>LINEアプリ⇔Expressサーバーでオウム返しBotを作成しました。</li>
</ul>
<p><a href="https://gyazo.com/ef380d63c53fba3e41b79216fb7f0070" target="_blank"><img src="https://i.gyazo.com/ef380d63c53fba3e41b79216fb7f0070.png" alt="Image from Gyazo" width="822"></a></p>
<p>次はAIのサービスの一つである<code>Face API</code>と組み合わせていきます。</p>
<blockquote>
<p>！！注意！！<br>後で使うので、Gitpodのタブは<strong>閉じない</strong>ようにしましょう！</p>
</blockquote>
<p><a href="..">←TOPに戻る</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: TOP">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="face-api.html" class="navigation navigation-next " aria-label="Next page: 感情分析AIと組み合わせよう">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"オウム返しBotを作ろう","level":"1.2","depth":1,"next":{"title":"感情分析AIと組み合わせよう","level":"1.3","depth":1,"path":"manual/face-api.md","ref":"manual/face-api.md","articles":[]},"previous":{"title":"TOP","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"plugins":["page-treeview"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"page-treeview":{"copyright":"","minHeaderCount":"2","minHeaderDeep":"2","collapsed":false},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"【ハンズオン資料】写真を送るとAIが分析してくれるLINE Botを1時間で作ってみよう ~プロトアウト授業体験会~","gitbook":"*","description":"ハンズオン - 写真を送るとAIが分析してくれるLINE Botを1時間で作ってみよう ~プロトアウト授業体験会~"},"file":{"path":"manual/echo-bot.md","mtime":"2021-03-06T06:14:22.731Z","type":"markdown"},"gitbook":{"version":"3.6.17","time":"2021-03-06T06:14:34.433Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

